<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>

    <div class="dashboard-container">
        <aside class="sidebar">
            <h2>M - SoftTech</h2>
            <ul>
                <li><a href="index.html">ğŸ  Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</a></li>
                <li><a href="users.html">ğŸ‘¥ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†</a></li>
                <li><a href="tasks.html">ğŸ“ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</a></li>
                <li><a href="performance.html">ğŸ“Š ØªÙ‚ÙŠÙŠÙ… Ø§Ù„Ø£Ø¯Ø§Ø¡</a></li>
                <li><a href="settings.html">âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª</a></li>
                <li><a href="support.html">ğŸ“ Ø§Ù„Ø¯Ø¹Ù…</a></li>
                <li class="logout"><a href="#">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</a></li>
            </ul>
        </aside>

        <main class="main-content">
            <header>
                <h1>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h1>
                <button id="openTaskModal">â• Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</button>
            </header>

            <section class="task-list">
                <h2>ğŸ“‹ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
                <div id="tasksContainer">
                    <p>ğŸš€ Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ù… Ø­Ø§Ù„ÙŠÙ‹Ø§ØŒ Ø£Ø¶Ù ÙˆØ§Ø­Ø¯Ø© Ø¬Ø¯ÙŠØ¯Ø©!</p>
                </div>
            </section>
            
            <!-- ğŸ“Œ Ù‚Ø³Ù… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ø®Ø§ØµØ© Ø¨Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… -->
            <section class="user-tasks">
                <h3>ğŸ“Œ Ù…Ù‡Ø§Ù…ÙŠ</h3>
                <ul id="userTasksList">
                    <p>ğŸ“ Ù„Ù… ØªÙ‚Ù… Ø¨Ø£Ø®Ø° Ø£ÙŠ Ù…Ù‡Ù…Ø© Ø¨Ø¹Ø¯.</p>
                </ul>
            </section>
            
        </main>
    </div>

    <!-- ğŸ”¹ Ù†Ø§ÙØ°Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø© -->
    <div id="taskModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©</h2>


            <label for="taskName">Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©:</label>
            <input type="text" id="taskName" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù‡Ù…Ø©" required>

            <label for="taskDescription">ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©:</label>
            <textarea id="taskDescription" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ù‡Ù…Ø©"></textarea>

            <label for="taskVisibility">Ù…Ù† ÙŠØ³ØªØ·ÙŠØ¹ Ø±Ø¤ÙŠØ© Ù‡Ø°Ù‡ Ø§Ù„Ù…Ù‡Ù…Ø©ØŸ</label>
            <select id="taskVisibility">
                <option value="Ù…Ø¹ÙŠØ¯">Ù…Ø¹ÙŠØ¯</option>
                <option value="Ù…Ù†Ø¯ÙˆØ¨ Ø¯ÙØ¹Ø©">Ù…Ù†Ø¯ÙˆØ¨ Ø¯ÙØ¹Ø©</option>
                <option value="Ù…Ù†Ø¯ÙˆØ¨ Ø³ÙƒØ´Ù†">Ù…Ù†Ø¯ÙˆØ¨ Ø³ÙƒØ´Ù†</option>
                <option value="Ø§Ù„ÙƒÙ„">Ø§Ù„ÙƒÙ„</option>
                <option value="Ù…Ù†Ø¯ÙˆØ¨ Ø¯ÙØ¹Ø© Ùˆ Ø³ÙƒØ´Ù†">Ù…Ù†Ø¯ÙˆØ¨ Ø¯ÙØ¹Ø© Ùˆ Ø³ÙƒØ´Ù†</option>
            </select>

            <button id="addTaskBtn">Ø¥Ø¶Ø§ÙØ©</button>
        </div>
    </div>

    <script src="main.js"></script>
    <script src="auth.js"></script>
    <script src="api.js"></script>

    <script>
        // Ø¹Ù†Ø§ØµØ± HTML
        const modal = document.getElementById("taskModal");
        const openModalBtn = document.getElementById("openTaskModal");
        const closeModalBtn = document.querySelector(".close");
        const addTaskBtn = document.getElementById("addTaskBtn");
        const tasksContainer = document.getElementById("tasksContainer");
        const userTasksList = document.getElementById("userTasksList");

        // âœ… Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
        openModalBtn.addEventListener("click", function () {
            modal.style.display = "flex";
        });

        // âœ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥ØºÙ„Ø§Ù‚
        closeModalBtn.addEventListener("click", function () {
            modal.style.display = "none";
        });

        // âœ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù†Ø§ÙØ°Ø© Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø®Ø§Ø±Ø¬Ù‡Ø§
        window.addEventListener("click", function (event) {
            if (event.target === modal) {
                modal.style.display = "none";
            }
        });

        // âœ… Ø¥Ø¶Ø§ÙØ© Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©
        addTaskBtn.addEventListener("click", function () {
            let taskName = document.getElementById("taskName").value.trim();
            let taskDescription = document.getElementById("taskDescription").value.trim();
            
            if (taskName === "" || taskDescription === "") {
                alert("ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„");
                return;
            }

            let taskElement = document.createElement("div");
            taskElement.classList.add("task-card");
            taskElement.innerHTML = `
                <h4>${taskName}</h4>
                <p>${taskDescription}</p>
                <button class="get-task-btn" onclick="claimTask(this)">ğŸ“Œ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø©</button>
            `;

            tasksContainer.appendChild(taskElement);

            // âœ… Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            if (tasksContainer.querySelector("p")) {
                tasksContainer.querySelector("p").style.display = "none";
            }

            // âœ… Ø¥ØºÙ„Ø§Ù‚ Ø§Ù„Ù…ÙˆØ¯Ø§Ù„ ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø­Ù‚ÙˆÙ„
            modal.style.display = "none";
            document.getElementById("taskName").value = "";
            document.getElementById("taskDescription").value = "";
        });

        // âœ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù‡Ù…Ø© ÙˆÙ†Ù‚Ù„Ù‡Ø§ Ø¥Ù„Ù‰ "Ù…Ù‡Ø§Ù…ÙŠ"
        function claimTask(button) {
            let taskElement = button.parentElement;
            let taskTitle = taskElement.querySelector("h4").innerText;
            let taskDetails = taskElement.querySelector("p").innerText;

            let newTaskItem = document.createElement("li");
            newTaskItem.innerHTML = `<strong>${taskTitle}</strong>: ${taskDetails}`;

            userTasksList.appendChild(newTaskItem);

            // âœ… ØªØ¹Ø·ÙŠÙ„ Ø§Ù„Ù…Ù‡Ù…Ø© Ø¨Ø¹Ø¯ Ø£Ø®Ø°Ù‡Ø§
            button.remove();
            taskElement.style.opacity = "0.5";
            taskElement.style.pointerEvents = "none";

            // âœ… Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ù†Øµ Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠ
            if (userTasksList.querySelector("p")) {
                userTasksList.querySelector("p").style.display = "none";
            }
        }
    </script>
</body>
</html>
